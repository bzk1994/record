<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Page Title</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="http://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>
</head>

<body>
  <h1>Promise</h1>
</body>

<script>
  setTimeout(() => {
    console.log('setTimeout')
  }, 0)

  function f1() {
    const deferred = $.Deferred()
    deferred.resolve('Deferred')
    return deferred.promise()
  }

  $.when(f1())
    .then(res => {
      console.log(res)
    })

  new Promise(resolve => {
    resolve()
  }).then(() => {
    console.log('Promise1')
  })

  // f1().then(res => {
  //   f2(res)
  // })

  // function f1(fn) {
  //   setTimeout(() => {
  //     fn('f1')
  //   }, 500)
  // }

  // f1(f2)

  // function* foo() {
  //   const res = yield f1()
  // }

  // for (let n of foo()) {
  //   n.then && n.then(res => {
  //     f2(res)
  //   })
  // }

  // function f1() {
  //   return new Promise(resolve => {
  //     setTimeout(() => {
  //       resolve('f1')
  //     }, 500)
  //   })
  // }

  // (async function () {
  //   const res = await f1()
  //   f2(res)
  // })()

</script>

</html>